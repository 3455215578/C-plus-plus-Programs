###                                                    C++是如何工作的？



## 一.预编译阶段

​	1.一个C++程序包括若干个源文件，在源文件中所有带#号的语句都是预编译指令(Preprocessor statement)。

​	当编译器收到一个源文件时，它做的第一件事就是预处理所有的预处理指令，因此预编译发生在真正的编译之前。



**(1)#include**

​	**当我们include一个头文件时，相当于把这个头文件的内容粘贴到include语句的位置, 一定要避免函数或变量被重复定义(重复声明并不会报错)，这样会导致链接器无法明确链接的东西！**



## 二.编译阶段

​	预编译完成后，编译器会根据方案配置和方案平台将C++代码转换成一个可执行的程序。



​	**(1)方案配置(Solution Configuration)**:  规定该如何构建一个项目(Debug配置下，优化被禁用，因此Debug配置的运行速度比									      Release要慢得多)

​	**(2)方案平台(Solution Platform)**:  编译的目标平台(x64则说明编译器会生成一个用于windows 64位的程序)



##### 	(3)编译器(Compile)

##### 		编译器会根据项目的配置和平台将每个cpp文件单独编译为一个object文件，在windows中的拓展名为.obj(单独编译某个cpp文件的快捷键为CTRL + F7)，在项目对应的配置和平台的文件夹下可以看到所有cpp文件对应的obj文件。



​		①声明和定义：

​			i.声明：声明某个函数存在。当想要在一个源文件内使用其他cpp文件的函数等，则需要在源文件中声明该函数，告知编译				     器有这个函数。

​				     当程序被编译后，链接器会去寻找被声明函数的定义并与被调用的函数联系起来，如果找不到定义则会报错				     **Linker Error**。	



​			ii.定义：实现函数具体的功能。			

​		

##### 	(4)链接器(Linker)

​		链接器会解析所有符号(**Symbol**)，联通所有被调用的函数。



​		当所有的cpp文件都被编译成一个个obj后，**链接器会把所有的obj文件联系起来, 并生成一个可执行的exe文件**